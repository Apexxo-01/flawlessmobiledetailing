<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mobile Detailing – Quick Quote & Booking</title>
  <style>
    :root { --brand-primary:#9f7cd7; --brand-dark:#231539; }
    *{box-sizing:border-box;margin:0;padding:0;font-family:Arial,sans-serif}
    body{background:#f9f8fc;color:var(--brand-dark);padding:20px}
  .container {
  width: 100%;
  max-width: 1280px;
  margin: 0 auto;
  background: #fff;
  border-radius: 18px;
  padding: 28px;
  box-shadow: 0 6px 18px rgba(0,0,0,.08);
}


    h1{text-align:center;margin-bottom:24px;color:var(--brand-dark)}
    .step{display:none}
    .step.active{display:block}
    .vehicle-grid {
  display: grid;
  /* auto-fit will collapse “empty” tracks when there’s room for more items */
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 20px;
  width: 100%;       /* ensure the grid fills its container */
}

    .vehicle-btn{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;border:2px solid #ddd;border-radius:14px;cursor:pointer;transition:.2s;background:#f3eefc}
    .vehicle-btn:hover,.vehicle-btn.selected{border-color:var(--brand-primary);background:#e3d5f6}
    .vehicle-btn span{font-size:40px;margin-bottom:8px}
    h2{margin:24px 0 12px;text-align:center;color:var(--brand-primary)}
    .package-box{background:#f3eefc;padding:18px;border-radius:14px;margin-bottom:24px}
    .package-box ul{list-style:disc;margin-left:20px;margin-top:8px}
    .addons{margin-top:20px}
    .addon-group{margin-bottom:20px}
    .addon-group h4{margin-bottom:10px;color:var(--brand-dark);border-bottom:1px solid #ccc;padding-bottom:5px}
    .addon{display:flex;align-items:center;justify-content:space-between;background:#f5f5f5;border-radius:10px;padding:12px 16px;margin-bottom:8px}
    .addon-name{flex:1;padding-right:10px}
    .addon-price{width:90px;text-align:right;margin-right:10px}
    .addon input{order:3;transform:scale(1.3)}
    .total{font-weight:bold;font-size:1.2rem;text-align:center;margin-top:28px}
    .btn{display:block;width:100%;border:none;border-radius:10px;padding:14px;font-size:1rem;cursor:pointer}
    .btn-primary{background:var(--brand-primary);color:#fff;margin-top:20px}
    .notes{background:#fff5e6;margin-top:28px;padding:16px;border-radius:12px}
    .notes ul{margin-left:20px;margin-top:8px}
    .hidden{display:none}
  </style>
</head>
<body>
  <div class="container">
     <h1 style="font-size:2rem; font-weight:600; letter-spacing:1px;">Get An Instant Quote And Book Online In Just A Few Steps</h1>
    <div id="step1" class="step active">
      <h2>1️⃣ Select Your Vehicle Type</h2>
      <div class="vehicle-grid">
        <div class="vehicle-btn" data-type="Car"><span>🚗</span>Car</div>
        <div class="vehicle-btn" data-type="SUV"><span>🚙</span>SUV</div>
        <div class="vehicle-btn" data-type="Truck"><span>🚚</span>Truck</div>
        <div class="vehicle-btn" data-type="Motorcycle"><span>🏍️</span>Motorcycle</div>
        <div class="vehicle-btn" data-type="RV"><span>🚌</span>RV</div>
      </div>
    </div>
    <div id="step2" class="step">
      <h2>2️⃣ Customize Your Package</h2>
      <div id="rvLengthBox" class="hidden">
        <label for="rvLengthInput" style="font-size: 1.1rem; font-weight: bold; margin-right: 10px; display: inline-block;">Enter RV Length (in feet):</label>
        <input type="number" id="rvLengthInput" min="10" max="60" placeholder="e.g., 30" style="font-size: 1.1rem; padding: 6px 10px; width: 100px; display: inline-block;">
      </div>
      <div id="packageBox" class="package-box"></div>
      <div class="notes">
        <p><strong>⚠️ Additional Charges:</strong> In rare cases, vehicles requiring extra time or cleanup may incur a fee of $25–$50. We'll always let you know before starting.</p>

      </div>
      <form id="addonsForm">
        <div class="addons" id="addonList"></div>
        <div class="exclude-options" style="margin-top:20px">
          <label><input type="radio" name="excludeSection" value="none" checked> Full Detail (Recommended)</label>
          <label><input type="radio" name="excludeSection" value="interior"> Exterior Only (-$50)</label>
          <label><input type="radio" name="excludeSection" value="exterior"> Interior Only (-$50)</label>
        </div>
      </form>
      <div class="total">Total: $<span id="totalPrice">0</span></div>
      <button id="nextBtn" class="btn btn-primary">Next: Book Now</button>
      
    </div>
    <div id="step3" class="step">
      <h2>🗓 Book Your Appointment</h2>
      <iframe src="https://api.leadconnectorhq.com/widget/booking/8r2Df2ibe74EycJbAHYu" style="width: 100%;border:none;overflow: hidden; min-height: 800px" scrolling="no"></iframe>
    </div>
  </div>
<script>
document.addEventListener('DOMContentLoaded', () => {
  // ——————— State & DOM refs ———————
  let selectedVehicle = null;
  const step1         = document.getElementById('step1');
  const step2         = document.getElementById('step2');
  const step3         = document.getElementById('step3');
  const packageBox    = document.getElementById('packageBox');
  const rvLengthBox   = document.getElementById('rvLengthBox');
  const vehicleBtns   = document.querySelectorAll('.vehicle-btn');
  const totalPriceEl  = document.getElementById('totalPrice');
  const rvLengthInput = document.getElementById('rvLengthInput');
  const addonList     = document.getElementById('addonList');
  const nextBtn       = document.getElementById('nextBtn');

  // ——————— Base packages ———————
  const basePackages = {
    Car: {
      price: 149,
      desc: `<h3>🚗 Full Detail for Cars – $149</h3><ul><li>Auto Basic Exterior…</li><li>Auto Basic Interior…</li><li>Auto Interior Detail…</li><li>Auto Exterior Detail…</li></ul>`
    },
    SUV: {
      price: 169,
      desc: `<h3>🚙 Full Detail for SUVs – $169</h3><ul><li>…</li></ul>`
    },
    Truck: {
      price: 189,
      desc: `<h3>🚚 Full Detail for Trucks – $189</h3><ul><li>…</li></ul>`
    },
    Motorcycle: {
      price: 120,
      desc: `<h3>🏍️ Full Detail for Motorcycles – $120</h3><ul><li>Basic Wash…</li></ul>`
    },
    RV: {
      price: 0,
      desc: `<h3>🚌 RV Detailing – $10 per foot</h3><ul><li>Auto Basic Exterior…</li><li>Auto Basic Interior…</li><li>Auto Interior Detail…</li><li>Auto Exterior Detail…</li></ul>`
    }
  };

  // ——————— Add-on groups ———————
  const addonGroupsByVehicle = {
    Car: [ /* your Car groups here */ ],
    SUV: [ /* SUV groups */ ],
    Truck: [ /* Truck */ ],
    Motorcycle: [ /* Motorcycle */ ],
    RV: [ /* RV */ ]
  };

  // ——————— Render add-ons ———————
  function renderAddons(type) {
    addonList.innerHTML = '';
    (addonGroupsByVehicle[type] || []).forEach(group => {
      const div = document.createElement('div');
      div.className = 'addon-group';
      div.innerHTML = `<h4>${group.title}</h4>`;
      group.items.forEach(item => {
        const row = document.createElement('div');
        row.className = 'addon';
        row.innerHTML = `
          <span class="addon-name">${item.name}</span>
          <span class="addon-price">$${item.price}</span>
          <input type="checkbox" data-price="${item.price}">
        `;
        div.appendChild(row);
      });
      addonList.appendChild(div);
    });
  }

  // ——————— Calculate total ———————
  function calculateTotal() {
    if (!selectedVehicle) return;
    let base = (selectedVehicle === 'RV')
      ? (parseInt(rvLengthInput.value || 0) * 10)
      : basePackages[selectedVehicle].price;
    const excl = document.querySelector('input[name="excludeSection"]:checked');
    if (excl && excl.value !== 'none') base -= 50;
    addonList.querySelectorAll('input:checked').forEach(cb => {
      base += parseInt(cb.dataset.price, 10);
    });
    totalPriceEl.textContent = base;
  }

  // ——————— sendHeight helper ———————
  function sendHeight() {
    const h = document.documentElement.scrollHeight;
    console.log('[iframe] sending height =', h);
    window.parent.postMessage(
      { type: 'iframeHeight', height: h },
      '*'  // you can restrict to your parent origin if you prefer
    );
  }

  // ——————— Monkey-patch calculateTotal ———————
  const _origCalc = calculateTotal;
  calculateTotal = function(...args) {
    _origCalc.apply(this, args);
    sendHeight();
  };

  // ——————— Vehicle selection → Step 2 ———————
  vehicleBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      selectedVehicle = btn.dataset.type;
      step1.classList.remove('active');
      step2.classList.add('active');
      step3.classList.remove('active');
      vehicleBtns.forEach(b => b.classList.remove('selected'));
      btn.classList.add('selected');
      packageBox.innerHTML = basePackages[selectedVehicle].desc;
      renderAddons(selectedVehicle);
      rvLengthBox.classList.toggle('hidden', selectedVehicle !== 'RV');
      calculateTotal();
    });
  });

  // ——————— Hook up add-ons, RV length, exclude options ———————
  addonList.addEventListener('change', calculateTotal);
  rvLengthInput.addEventListener('input', calculateTotal);
  document.querySelectorAll('input[name="excludeSection"]')
    .forEach(r => r.addEventListener('change', calculateTotal));

  // ——————— “Next” button → Step 3 + resize ———————
  nextBtn.addEventListener('click', () => {
    step2.classList.remove('active');
    step3.classList.add('active');
    sendHeight();
  });

  // ——————— Initial resize on load ———————
  sendHeight();
});
</script>

</body>
</html>
